#!/usr/bin/env bash
set -euo pipefail

TEST=OFF
# Configure
cmake -S . -B build -DBUILD_TESTS=$TEST

# Build
cmake --build build -j"$(nproc)"

# Run tests
if [ "$TEST" = "ON" ]; then
    ctest --test-dir build --output-on-failure
fi